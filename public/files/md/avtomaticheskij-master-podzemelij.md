---
title: 'Автоматический мастер подземелий'
date: '2020-03-09'
categories:
  - 'our-materials'
tags:
  - '5e'
  - 'gmresoruces'
  - 'statblock'
---

https://technicshistory.com/2020/01/23/tangent-the-automated-dungeon-master/

![](https://habrastorage.org/getpro/habr/post_images/fa6/c0f/547/fa6c0f547cdadc881a936905e71f5c0d.jpg)

## Волшебство «подземелий и драконов»

Когда в 1980-х я был маленьким ребёнком, меня очаровала игра "[Подземелья и драконы](https://ru.wikipedia.org/wiki/Dungeons_%26_Dragons)" (Dungeons and Dragons, D&D). Какое-то время игра нравилась и моему старшему брату, но потом она ему, очевидно, надоела, и он завещал мне разрозненную коллекцию из коробок и книг с инструкциями от компании-издателя Tactical Studies Rules (TSR). Самым простым для освоения и завораживающим был ярко-красный базовый набор игры D&D Basic Set, богато украшенный картинкой за авторством Ларри Элмора с изображением воина с сияющим мечом, противостоящего страшному дракону, скорчившемуся на куче нечестно добытых богатств. Сложно объяснить, сколько восторга и удивления я испытал благодаря этой небольшой картонной коробочке и лежавшим внутри тетрадочкам с инструкциями. D&D придавала структуру и внутреннюю непротиворечивость воображаемым играм, в которые я, как и многие другие дети, в любом случае играл.

Игра D&D развилась в рамках высоко конкуретной культуры военных игр ("[варгеймов](https://ru.wikipedia.org/wiki/%D0%92%D0%B0%D1%80%D0%B3%D0%B5%D0%B9%D0%BC)") с миниатюрами, и в неё можно играть как и в традиционную игру, поставив цель, достижением которой измеряется выигрыш. В данном случае, как и во многих варгеймах, от которых она произошла, один игрок назначается судьёй («мастером подземелий»), и на него возлагается ответственность за обработку действий, осуществляемых другими игроками. В таком режиме на различных выставках TSR регулярно проводила турниры. Побеждала группа искателей приключений, которой лучше других удавалось выжить, пройдя все трюки, ловушки и монстров подземелья, и набрать больше других драгоценностей.

Однако истинная магия D&D и других ролевых игр (RPG) проявляется только при использовании второго варианта игры, когда одни и те же игроки и мастер подземелий (Dungeon Master, DM) встречаются периодически (к примеру, еженедельно), чтобы играть в одну непрерывную игру многократными сессиями. В соответствии с варгеймовскими корнями, такая постепенная игра называется кампанией. Как военная кампания состоит из последовательности передвижений и битв, проводимых одной армией, так и ролевая кампания состоит из повторяющихся вылазок в один и тот же воображаемый мир. У игры может существовать долгосрочная цель, достигнув которой, игроки «выигрывают», однако в игре никто не проигрывает. Основная цель – не следовать выигрышной стратегии, а испытывать приключения в несуществующих местах. Роль DM как судьи и арбитра отходит на второй план, уступая место роли создателя и симулятора мира.

![](https://habrastorage.org/getpro/habr/post_images/97c/a80/d92/97ca80d92be60051255e96fda9585b11.jpg)

_Часть карты города-государства из игры Invincible Overlord (1976), одного из первых опубликованных мест действия D&D, уже демонстрирующего желание создать полноценный мир для игроков_

## Вторичные миры и неудовлетворённость ими

Позвольте мне сделать небольшое отступление и обсудить вымышленные миры в литературе. Ведь именно желание воссоздать битвы и приключения из их любимых фэнтезийных произведений заставило Дэйва Арнесона и Гэри Гайгэкса изобрести D&D. Золотым стандартом широты воображения в подобной литературе, естественно, считается Средиземье Дж. Р. Р. Толкина. Толкин десятилетиями оттачивал очертания и углублял детализацию созданных им мифов, пытаясь выработать полностью английский эквивалент скандинавских [эдд](https://ru.wikipedia.org/wiki/%D0%AD%D0%B4%D0%B4%D0%B0) и греческих эпосов. Он назвал новый мир, появившийся в его сознании, субтворением (находящимся в рамках основного творения бога), или вторичным миром.

При чтении «Властелина колец» читатель сталкивается не просто с историей, но с целым воображаемым миром, в рамках которого она разворачивается. Средиземье, конечно же, не первый воображаемый мир в художественной литературе. Однако до Толкина подобные миры обычно были плоскими и невыразительными. Они представляли собой лишь средство для создания аллегории или сатиры, или фон для детских историй, не претендующий на реализм – как страна Оз Фрэнка Баума с её четырьмя симметричными землями, каждой из которых заведует местная ведьма, и населяет миленькое племя в одинаковых одеждах и домиках. У Толкина же мы встречаем местность, населённую богато проработанными королевствами и людьми, у каждого из которых есть собственная история и культура, собственные мифы и песни. Его истории кажутся истинными преданиями никогда не существовавших мест.

![](https://habrastorage.org/getpro/habr/post_images/091/826/477/091826477c773dd633c697cf5848c623.jpg)

Создатели D&D сразу начали с создания собственных вторичных миров в качестве мест действия приключений игроков – Гэри Гайгэкс разрабатывал Greyhawk, а Дэйв Арнесон — Blackmoor. С ростом популярности игр другие DM тоже стали создавать собственные миры (часто вдохновляясь литературой), или основывали свои кампании на опубликованных мирах. К примеру достигший феноменальной популярности мир [Forgotten Realms](https://ru.wikipedia.org/wiki/Forgotten_Realms), опубликованный TSR в 1987, основан на вымышленном мире, который Эд Гринвуд придумывал с самого детства. Погружение в богатый вторичный мир подобного рода превращает кампанию D&D из весёлой игры в разностороннюю литературную историю. Вместо того, чтобы просто читать о приключениях Фродо, Леголаса, Арагорна и остальных, можно самому пережить эти приключения, лично исследуя чудеся таких мест, как Средиземье.

При игре в D&D в рамках турнира все участники понимают, что за пределами предопределённого сценария больше ничего нет. Нельзя выйти из подземелья и решить отправиться куда-то ещё. Всё, что могут выбирать игроки – это способ продвижения в рамках подземелья. Кампания же обеспечивает игрокам открытость действий в рамках вторичного мира DM. Каждый игрок может создать собственного персонажа, за которого он будет отыгрывать во время кампании, в течение нескольких недель, месяцев или лет. Назовём эту возможность открытостью.

Некоторые традиционные настолки типа Cluedo/Clue позволяли игрокам входить в определённые роли, но открытости в них было крайне мало, поскольку пространство решений для манёвров было крайне ограниченным. В кампании D&D игрок может совершить любое правдоподобное действие к контексте мира, в котором обитает его персонаж. Ваш персонаж встретился с загадочным незнакомцем на деревенской площади? Вы можете перекинуться парой фраз, подрезать его кошелёк, ввязаться в драку или попытаться понравиться ему. Можно сделать всё, что вы можете придумать, и DM остаётся решить, к каким результатам приведут ваши действия, и какие последствия они могут повлечь за собой, влияя на эту деревню, окружающую местность или даже на весь мир.

И этот вторичный мир, купающийся в светоносном эфире, пронизывающем умы игроков и DM, кажется реальным игрокам в то время, когда их персонажи изучают его, поскольку он обладает внутренней целостностью. Мир сохраняется и постепенно меняется, даже когда ваших персонажей в нём нет. Они могут уйти из деревни после атаки на загадочного незнакомца, а возвратившись, обнаружить, что он обратил жителей против них, наврав с три короба об их зловредных деяниях. Или вместо этого они могут обнаружить, что банда орков разграбила деревню и убила их любимого бармена. В рамках компании игроки могут создать торговую империю, построить замок, основать королевство – и мир будет реагировать соответственно. Более того, различные части мира формируют гармоничное целое во времени и пространстве. Если жители деревни следуют определённым привычкам, то скорее всего, им же следуют и жители расположенного вниз по реке замка – а может, и нет, если его жители недавно завоевали этот регион, как норманнские сеньоры, повелевающие саксонскими крестьянами. Хорошо созданный и умело управляемый мир, такой, как Средиземье Толкина, оставляет ощущение живого места, где естественные очертания культуры и политики вырабатывались веками, благодаря потоку истории, тёкшей по руслу географии.

Да, вот тут-то и зарыта собака – мир должен быть хорошо созданным и умело управляемым. У Толкина в реализации его шедевра были два бесспорных преимущества перед бедными DM, на которых взвалили задачу создания мира. Во-первых, ему нужно было нарисовать детали мира, расположенные вдоль единственного пути. Несмотря на десятилетия труда, на момент его смерти большая часть регионов его мира была не более чем названиями на карте. Читатель «Властелина колец» может посетить Ривенделл, Эдорас и Минас Тирит, однако так и не узнаёт ничего касательно Харлиндона, Руна или Анфаласа, а также обо всех тех местах, о которых Толкин знал не больше читателей. Его персонажи вежливо обходят эти не нанесённые на карту регионы. Персонажи игрока редко бывают такими покорными. Во-вторых, Толкин писал и переписывал свои работы годами, мог взять паузу на несколько минут или часов, чтобы обратиться к предыдущим главам, картам или другим справочным материалам, прежде чем решить, что делать далее. И даже тогда он мог вернуться к определённому параграфу и пересмотреть своё решение, много месяцев или лет спустя. DM же обязан реагировать на действия персонажей в реальном времени, обычно за несколько секунд, или же игровая сессия быстро наскучит игрокам. И оба этих различия связаны со свободой, которая есть у игровых персонажей, и нет у литературных.

Умение симулировать непротиворечивый вторичный мир на ходу в таком режиме – это редкое сочетание навыков и труда. По обстоятельствам DM должен работать географом, демографом, экономистом, физиком и т.п. Он напрягает мускулы импровизации – сколько разных характеров и внешних видов можно придумать для владельцев таверн каждой деревни, через которую проходит кампания? Не говоря уже обо всех менестрелях, наёмниках, негодяях и так далее? А после установления фактов о некотором месте эта нагрузка переходит на память – как называлась та таверна в Элкенбурге? Конечно, тут помогает дотошное ведение записей. Тем не менее трудозатраты всё время растут, когда игроки накапливают историю встреченных ими людей и посещённых мест.

Мало есть DM, способных создать такое правдоподобие перед лицом неограниченной открытости и свободы игроков. Большая часть скатывается к «рельсовым» повествованиям, как их презрительно называют – к подготовке событий и мест, на манер Толкина, вдоль предопределённого пути следования, и к подталкиванию игроков на этот путь. Оставшиеся подробности кампании могут служить [потёмкинскими деревнями](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D1%82%D1%91%D0%BC%D0%BA%D0%B8%D0%BD%D1%81%D0%BA%D0%B8%D0%B5_%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BD%D0%B8), фасадом, способным развалиться от лёгкого прикосновения. Отсутствие свободы выбора имеет плохую репутацию из-за таких неприглядных действий DM, как попытки набрасывать игрокам всё более сильных монстров, если те отклоняются от намеченного пути – или, как было на моей памяти, путём выстраивания невидимого и непреодолимого силового поля между игроками и остальным миром. Но на практике обычно эта схема работает в виде мягкой социальной договорённости. Игроки знают, что DM потратил много часов на подготовку определённого сценария, и следуют ему для всеобщего блага. Так или иначе, рельсовые повествования смягчают проблему создания мира на лету, ограничивая свободу игроков определённым набором действий.

Однако даже мягкие рельсы требуют от DM огромной траты времени на подготовку и значительных навыков для правильной реализации. Некоторые DM склоняются к стилю без подготовки, к игре без предварительно подготовленных мира или сценария. Но для этого тоже требуется определённый набор навыков – в основном импровизационных – и большой опыт. D&D может стать волшебным опытом, однако потенциальному игроку трудно найти DM, имеющего время и необходимый для полного погружения талант. Не говоря уже о поисках единомышленников-игроков. Ничто так не портит фэнтезийную сагу, как приятель, постоянно отпускающий неуместные шуточки. Поэтому часто реальность D&D блекнет по сравнению с тем, какой она могла бы и должна бы быть.

## Бумажные миры

Учитывая сложности роли DM, не прошло много времени после изобретения D&D, когда игроки и издатели начали искать способы овладеть волшебством этой игры без необходимости использовать судью или даже других игроков. То есть, автоматизировать работу DM. Разве не было бы здорово иметь возможность погрузиться в открытый и непротиворечивый вторичный мир в любое время в любом месте самостоятельно – в качестве активного персонажа, а не пассивного читателя? Долгое время самым популярным и доступным способом найти такого «механического DM» были бумажные схемы, или «игровые книги».

В 1975 году Кен Сент-Андре, выпускник Аризонского университета, которому тогда было немногим менее тридцати, влюбился в идею D&D, однако разочаровался сложностью её правил. Тогда он решил опубликовать одну из первых альтернативных фэнтезийных ролевых игр, «Туннели и тролли» (T&T). Он самостоятельно распространял копии, напечатанные им в типографии университета, пока не нашёл издателя – предпринимателя-одиночку в Скоттсдейле, фирма которого называлась Flying Buffalo. Рик Лумис основал фирму, чтобы управлять многопользовательскими сессиями изобретённой им игры Nuclear Destruction \[«Ядерное уничтожение»\], в которую нужно было играть по почте с абонентской оплатой. Он занялся издательским бизнесом, приобретя права на карточную игру (не связанную с данной темой) Nuclear War. Лумис с удовольствием продавал оставшиеся копии T&T для Сент-Андре, и когда они закончились, приобрёл лицензию на публикацию дополнительного тиража, изготовленного силами Flying Buffalo.

Следующей весной один из игроков в T&T, Стив Маккалистер, предложил идею о создании одиночного приключения в пещерах. Его вдохновили популярные в то время книги, в которые можно было играть, выбирая различные варианты ответов на вопросы, и переходя к результатам. Лумису понравилась идея, и он написал первую одиночную ролевую игру Buffalo Castle, опубликованную им в мае 1976 года.

Buffalo Castle состоял из 150 параграфов (каждый определялся номером страницы и буквой), содержащих по нескольку кратких предложений с описаниями происходящего и вариантами действий для игроков. К примеру: «Вы зашли в шестую комнату. В середине находится большой фонтан. По желанию вы можете выпить из него. Если вы пьёте, проследуйте к параграфу 8C. Если хотите выйти через северную дверь, проследуйте к 4C. Если через восточную, идите в 16D». Игроку предоставляется выбор из трёх дверей, через которые можно войти в замок, откуда он и начинает игру. В приключении использовались элементы правил T&T, особенно битв, но запрещалось использование магии во избежание связанных с нею сложностей. Замок не прощал ошибок, и большая часть персонажей погибала, но удачливый герой имел шанс сбежать оттуда с ценным добром.

Buffalo Castle не привлёк большого внимания, но позднее в 1970-х его добились несколько книг под названием «выбери своё приключение» (Choose Your Own Adventure, CYOA), и за последовавшие десятилетия их продали сотнями миллионов копий (хотя предшественники CYOA появлялись и в 1960-х, имеющиеся свидетельства говорят о том, что Buffalo Castle был разработан совершенно независимо). Хотя Flying Buffalo продолжал производить одиночные приключения в мире T&T, только в 1982 году книга правил в стиле D&D вышла на более широкий рынок. В том году Стив Джексон и Йен Ливингстон решили попробовать самостоятельно создать ролевое приключение по схеме CYOA. Джексон и Ливингстон были фанатами D&D, а их компания Games Workshop несколько лет была дистрибьютором игры в Европе. Но они не пытались самостоятельно публиковать собственные истории. Нацелившись на более широкий рынок, чем может охватить самостоятельно издаваемая пресса, они продали права Puffin Books. Созданная ими серия Fighting Fantasy сочетала повествование, исследование местности и игру похожим на Buffalo Castle, однако издавалась в виде самодостаточных книг для массового читателя.

Серия достигла оглушительного успеха, и к 1985 году было продано три миллиона копий книг. Появился целый поджанр игровых книг, пытающихся эмулировать ощущения от ролевых игр, по большей части от D&D. Среди успешных серий можно отметить Wizards, Warriors, & You, GrailQuest, Lone Wolf, и «Sorcery!» (полный список можно найти на сайте gamebooks.org). Книгам CYOA недоставало элементов игры или постоянного мира. Вы просто делали выборы, которые детерминистским способом проводили вас по саду ветвящихся путей к одному из окончательных результатов. В книгах Fighting Fantasy и их последователях были введены элементы D&D из Buffalo Castle: статистика персонажа (здоровье и сила); случайность, включавшая бои при помощи кубиков; набор предметов, которые могли влиять на боевые возможности персонажа.

![](https://habrastorage.org/getpro/habr/post_images/862/8cd/da8/8628cdda8ef6db7d874ae8f38406fa27.jpg)

Однако новая волна одиночных приключений уделила гораздо больше внимания созданию богатого вторичного мира, который мог бы изучать игрок, чем это было сделано в Buffalo Castle. К примеру, набор предметов игрока в Fighting Fantasy мог влиять на развитие сюжета не только в боях – к примеру, при наличии правильного ключа можно было открыть закрытую дверь, что вело к следующему параграфу. Эти новые книги были не тонкими произведениями, а толстыми томами, содержавшими 300-400 параграфов (в два-три раза больше, чем в Buffalo Castle). В каждом параграфе было больше текста, что усиливало ощущение погружения в реальное окружение. Вот, как, к примеру, описывается подземное помещение в книге The Warlock of Firetop Mountain \[«Чародей горы огненной вершины»\], первой из серии Fighting Fantasy:

> Закрытая дверь внезапно раскрывается, и тошнотворная вонь достигает ваших ноздрей. Весь пол комнаты усыпан костями, гниющими растениями и слизью. Старик с растрёпанными волосами, одетый в лохмотья, с криком несётся на вас. У него длинная серая борода, и он размахивает старой деревянной ножкой от стула. Просто ли он безумен, как кажется на первый взгляд, или это какая-то ловушка? Вы можете просто закричать на него, чтобы попытаться успокоить (см. параграф 263) или вытащить меч и напасть на него (параграф 353).
>
> (Спойлер: с ним лучше поговорить, у него много полезной информации)

Серия книг «Одинокий волк» \[The Lone Wolf\] воспользовалась идеями из популярной D&D, и развила их, позволив игроку провести одного персонажа через непрерывную историю, растянувшуюся на десятки книг, а вместе с ним и все полученные навыки и предметы. Вся сага разворачивалась в мире Магнаманд, придуманном автором Джо Девером для его игр по D&D. Апофеозом же разработок игровых книг, описывавших глубокий вторичный мир, стал сериал «Сказочные земли» \[Fabled Lands\] за авторством Дейва Морриса и Джейми Томсна, публиковавшийся с 1995 по 1996 года, на фоне спада торговли игровыми книгами. В итоге сериал безвременно оборвался, после выхода шести томов вместо планировавшихся двенадцати.

Каждый том Fabled Lands представлял собой не отдельную историю, а описание одного из регионов вымышленного мира, со своими городами, деревнями, замками и дикой природой, которые можно было исследовать. Игрок мог переходить от одной книги к другой, перемещаясь между регионами, беря корабль или даже телепортируясь посредством волшебных врат. В сериале можно найти множество приключений и заданий, некоторые из которых ограничены одной книгой, а другие простираются на весь мир. Кроме того, игрок свободно может игнорировать всё это, и может просто шататься по миру и исследовать его. Система ключевых слов позволяет миру меняться в ответ на действия игрока. К примеру, в первой книге, «Королевство, раздираемое войной» \[The War-Torn Kingdom\] вы можете устранить претендента на трон или помочь ему получить корону (или вообще проигнорировать). Совершив одно из действий, вы получите определённые ключевые слова, скрепляющие ваши союзы в будущих взаимодействиях с любой из группировок. Это не говоря уже о подсистемах игры, позволяющих игроку принять религию, покупать дома, корабли и заниматься морской торговлей. Никто ещё не подходил так близко к созданию на бумаге мира, дарующего подобную полную и неограниченную свободу, сравнимую с игрой в D&D.

И всё же этот мир сильно не дотягивает до такой свободы. В любой точке игровой книги игрок ограничен двумя-тремя вариантами действий. Даже в богатейших ключевых точках «Сказочных земель», например, в больших городах, редко встречается более полдесятка вариантов. Это и близко не стоит к перечислению всех возможностей, которые были бы у вымышленного протагониста в подобной ситуации. Вспомним бредящего старика с горы огненной вершины. У игрока есть только два варианта – наорать на него или напасть. Легко придумать множество других направлений, в которых кампания в D&D могла бы разойтись от этой точки принятия решений. Можно было бы, например, предложить старику чистую одежду, попытаться его обездвижить, отойти в другую комнату и закрыть дверь. Если вы выбираете разговор, то книга не даёт вам возможности управлять разговором и влиять на его ответы. Каждый раз человек выдаёт одну и ту же информацию. Эта встреча не имеет и продолжительных эффектов. В руках DM старик мог бы стать союзником, ведущим персонажей по подземелью, или вы могли бы разыскать его семью и вернуть его домой. А если вы решили убить этого человека, его семья могла решить выследить вас; если вы разозлили его, он может решить следовать за вами и попытаться украсть ваше сокровище. В рамках игровой книги свобода и открытость ограничены немногим менее, чем самые рельсовые из всех рельсовых повествований.

## Цифровые миры

Таким образом, игроки начали обращаться к компьютерам за автоматизацией DM. Персональные компьютеры начали проникать на рынок в конце 1970-х, и стали частью жизни большинства домохозяйств среднего класса в США в середине 1990-х. Компьютерная программа очевидно была способна динамически реагировать на действия игрока лучше, чем статичное напечатанное произведение. Она в теории могла бы по-настоящему симулировать вторичный мир, безо всяких ограничений бумажных блок-схем и без неуклюжих ключевых слов или мест для галочек.

Предвестником этих обещаний стала одна из первых компьютерных игр, вдохновлённых системой D&D: Adventure. Уилл Кроутер, инженер из Bolt, Beranek and Newman (BBN), [создатель части основного софта для ARPANET](https://habr.com/ru/post/461177/), написал эту игру для миникомпьютера BBN, PDP-10, в середине 1970-х. В игре не было графики (в то время мало какие компьютерные терминалы её поддерживали), поэтому всё взаимодействие шло через текст, прямо как в игровых книгах. Кроутер написал для игры парсер, принимавший на вход команды из двух слов в виде «глагол существительное». Таким образом, можно было сказать компьютеру по-английски, что вам хочется сделать, а он сообщал вам о последствиях ваших действий. Однако это нельзя было назвать реализацией мечты о цифровом DM. Да, написать можно было всё, что угодно. Но большую часть времени компьютер отказывался вас понимать. К примеру, игра начиналась со следующего описания:

> ВЫ СТОИТЕ В КОНЦЕ ДОРОГИ ПЕРЕД НЕБОЛЬШИМ КИРПИЧНЫМ ЗДАНИЕМ.  
> ВАС ОКРУЖАЕТ ЛЕС. НЕБОЛЬШОЙ РУЧЕЙ ВЫТЕКАЕТ ИЗ ЗДАНИЯ И ИСЧЕЗАЕТ В КАНАВЕ.

Игра принимала команды типа «ВОЙТИ В ЗДАНИЕ», «ВЫПИТЬ ВОДЫ», «ПОЙТИ НА ЮГ», но не принимала команды вроде «ЗАБРАТЬСЯ НА ДЕРЕВО», «ПЛЫТЬ», «РАЗЖЕЧЬ КОСТЁР», «ПЕРЕЖДАТЬ НОЧЬ» и т.п.

Adventure была, по сути, замаскированной блок-схемой, прятавшей свои ответвления и заставлявшей игрока догадываться об их существовании. Она породила собственный жанр компьютерных игр, приключенческие игры. И хотя в некоторых более поздних играх, особенно Zork, которую помогал писать ещё один член D&D-кампании Кроутера, появлялись и более сложные парсеры, ни одна из них не отошла по правдоподобию слишком далеко от игровых книг. К 1980-м жанр практически полностью оторвался от своих D&D-корней, сконцентрировавшись в основном на загадках (которые обычно заключались в неочевидном комбинировании объектов из инвентаря с окружением), вместо исследований, развития персонажа или героических подвигов.

Первые компьютерные RPG с графикой появились в середине 1970-х на системе PLATO IV, мейнфрейме из Иллинойского университета, способном поддерживать сотни графических терминалов. Вскоре после этого похожие игры добрались до более широкой аудитории на первых персоналках. Обычно это были типичные игры с исследованием подземелий \[dungeon crawlers\] – они пользовались решётчатой природой подземных коридоров для упрощения проблемы создания картинки на экране, и концентрировались на боях, самой лёгкой части D&D, которую можно строго запрограммировать алгоритмами.

Среди лучших из этих ранних попыток была игра [Wizardry: Proving Grounds of the Mad Overlord](https://ru.wikipedia.org/wiki/Wizardry:_Proving_Grounds_of_the_Mad_Overlord), написанная двумя студентами Корнелского университета, Эндрю Гринбергом и Робертом Вудхедом. У Гринберга и Вудхеда был доступ к терминалу PLATO в Корнеле, и много идей они позаимствовали у предшествующих игр типа Dungeon и Oubliette. Выйдя на компьютерах Apple II в 1981 году, Wizardry стала характерным представителем одной из моделей компьютерных RPG – набора битв в безымянном подземелье, перемежающихся отдыхом для восстановления сил и здоровья. Весь интерес игры связан с управлением ресурсами, картографированием и тактикой битв. Намёки на более обширный мир отсутствуют, а смысл и мотивация действий игрока, кроме убийства всего, что он видит, довольно туманны. И даже состояние подземелья обычно не сохраняется после того, как игроки возвращаются на поверхность, чтобы прикупить оборудования – оно заново заполняется теми же монстрами и сокровищами, что были там в первый раз.

Ещё одна игра для Apple II от 1981 года пошла по другому пути, по направлению к многогранному цифровому вторичному миру. Игру Ultima написал подросток, фанат D&D из пригорода Хьюстона по имени Ричард Гэрриот. Она стала цифровой репродукцией придуманного им для своей D&D-кампани мира, который он назвал Sosaria. Игрок может получать задания от королей, углубляться в подземелья, заходить в города для покупки оборудования, узнавать слухи при посещении таверн, спасать принцесс, заполучить средство передвижения и даже пытаться воровать вещи у жителей. Всё повествование скрепляет вместе общая арка повествования – задание найти четыре волшебных драгоценных камня, которые позволят отправиться в прошлое и победить злого волшебника Мондейна.

Ultima схематична и местами слабо связана – взять, к примеру, странную интерлюдию, в которой игрок получает управление космическим кораблём и сражается с врагами, которые подозрительно напоминают TIE Fighter’ы. А ещё она крайне структурирована и симметрична –все замки и города идентичны по структуре, в мире есть четыре континента, на каждом из которых расположено по два замка, одному подземелью и одной достопримечательности. И всё же это невероятное достижение, крохотный воображаемый мир, втиснутый на две дискеты 19-летним студентом Техасского университета.

![](https://habrastorage.org/getpro/habr/post_images/c68/314/c59/c68314c590a1d103d676312c79cbde62.gif)

С развитием серии Ultima Гэрриот сумел построить компанию на базе её успеха, Sosaria превратилась в Британнию, а в играх появилась ещё большая глубина и разнообразие – как в богатстве мира, так и в интерактивности и открытости игрового процесса. Кульминацией стала Ultima VII 1992 года, созданная большой командой авторов, программистов и художников компании Origin Systems в Остине, Техас. Origin Systems много усилий потратила на написание текстов для игры, чтобы придать всем персонажам во всех уголках Британнии характеры и очарование. Ландшафт заполнен огромным количеством побочных квестов, небольших загадок, которые игрок может решить независимо от общего прогресса: пропавшего мужа бросили в тюрьму за кражу яблока, вор, притворяющийся монахом, два брата спорят из-за религиозных предпочтений.

![](https://habrastorage.org/getpro/habr/post_images/d57/38c/7c1/d5738c7c1953aaba1f0bcf9a4222b9d5.png)

В то время, как серия Гэррета увязала в болоте неудачи, которой оказалась Ultima IX, мантию богатого цифрового вторичного мира подхватили две знаменательные игры конца 1990-х — Fallout и Baldur’s Gate. Эти игры попытались вместить в себя всё, и по большей части им это далось: детализированные и удовлетворительные тактические бои; открытый для изучения мир, с врагами и друзьями, появляющимися в зависимости от выборов игрока; части истории, разбросанные по игре, естественным образом ведущие к заключению без ощущения рельсов; и, да, конечно же побочные задания. В такие игры можно окунаться, как в тёплую ванную, блуждать там много часов и всё равно находить восхитительные новые сюрпризы: новые местности для изучения, новые варианты выбора, новых персонажей.

И весь этот восторг, к сожалению, обходится создателям этих игр в огромное количество времени и денег. В кампании D&D всё богатство мира и его жителей бесплатно вызывается в воображении игроков рассказами DM. В Baldur’s Gate же каждый выбор, каждую возможность у игрока, предлагаемую ему во имя открытости, кому-то пришлось реализовать. Игра представляет собой детально проработанную, с любовью проиллюстрированную и озвученную блок-схему. Каждый храм, каждое подземелье, каждая стока диалога, каждое движение персонажа, каждое боковое задание существуют благодаря тяжёлому труду художников, писателей и программистов.

С годами стоимость реализации подобных вещей очень быстро растёт, а ожидания визуального и звукового богатства игр постоянно наращиваются – от простых плиток в Ultima до вручную нарисованных ландшафтов Baldur’s Gate и далее. Как сказал ведущий дизайнер последней в недавнем интервью, объясняя стоимость литературных украшений в сценарии:

> Написание слов на странице отнимает десять секунд, но из-за всех ресурсов, вложенных в это – моделирование, текстурирование, озвучка, музыка, всё остальное – эти десять секунд превращаются в десятки тысяч долларов.

Согласно тому же источнику, на игру было потрачено девяносто человеко-лет – при том, что на полное изучение всей игры игрокам нужно порядка 60 часов.

Вследствие этого, а также нишевого характера RPG, игры, подобные Ultima, были по большому счёту преданы забвению после начала 2000-х годов, в угоду более эффективным по стоимости разработки жанрам. Также поэтому Fallout, Baldur’s Gate и их сиквелы так никому и не удалось превзойти. С 2001 года жанр пребывал в спячке, и только в 2012 на Kickstarter прошла успешная компания по сбору средств на создание Wasteland 2.

Однако, был и ещё один возможный подход к созданию вторичных миров. Ведь компьютер может не только переваривать введённые данные. Что, если вместо того, чтобы платить всем этим писателям и художникам, заставить компьютер самостоятельно построить мир?

## Цифровой синтез

Компьютер довольно легко заставить сгенерировать подземный лабиринт. Есть [целая книга](https://habr.com/ru/post/161035/), посвящённая генерации лабиринта одной строчкой на языке BASIC: «10 PRINT CHR$(205.5+RND(1));: GOTO 10» (2012). Не сильно сложнее забить её случайными чудовищами и сокровищами, сложность и ценность которых постепенно растёт при последовательном спуске на следующие уровни. На основе этих фактов был создан целый жанр, [roguelike](https://ru.wikipedia.org/wiki/Roguelike), то есть, «rogue-подобные», в честь игры [Rogue](https://ru.wikipedia.org/wiki/Roguelike) 1980 года для Unix-систем со свободным распространением. Поздние её варианты, такие, как Hack, Moria, NetHack и Angband также распространились по отдалённым областям мира гиков в 1980-е. Хотя к некоторым играм прилагались наборы графики, по умолчанию они работали в текстовом режиме, рисуя подземелья из символов ASCII, заменяя чудовищ буквами, лестницы решётками и игрока символом @.

![](https://habrastorage.org/getpro/habr/post_images/8aa/0a9/478/8aa0a9478345d70527d4ef023bd7a5a3.png)

_ASCII-подземелье в NetHack_

Более широкую культурную популярность жанр приобрёл после выхода в 1996 году Diablo, игры, взявшей за основу идею процедурной генерации подземелий и сокровищ, и добавившей к ней разнообразных визуальных и звуковых составляющих, а также графический интерфейс. Но основой всех таких игр было исследование двумерных подземелий. Никакой другой свободы, кроме сменяющих друг друга убийств и сбора сокровищ, они игроку не предлагали, и никакой мир там в более широком смысле изучать не требовалось.

Что, если применить базовые концепции генерации roguelike-подземелий к целому миру? Такова была концепция серии игр Elder Scrolls, стартовавшей в 1994 году с игры Arena, за которой в 1996 году последовала более амбициозная Daggerfall. Вместо того, чтобы генерировать новый контент на лету по мере изучения мира игроками, как делают большинство roguelike игр, создатели Daggerfall сгенерировали основные места для приключений в провинциях High Rock и Hammerfell на своих компьютерах, а потом вручную подправили результаты. В сумме в игре содержится около четырёх тысяч подземелий и пяти тысяч поселений (деревень, мелких и крупных городов), которые может посетить игрок, на площади порядка 150 000 кв. км.

Несмотря на потрясающие цифры, большая часть этой большой территории остаётся неподвижной и безжизненной с точки зрения игрового процесса. В более-менее современных играх типа Ultima VII, Fallout или Baldur’s Gate исследовать мир интересно, поскольку никогда не знаешь, какие персонажи, истории, приключения или другие сюрпризы ждут тебя за каждым углом. В мире Daggerfall кроме небольших кучек монстров, которых нужно убивать, в дикой местности, разделяющей пещеры и города, делать и смотреть нечего. Вход в новое подземелье или в новый город не обещает никаких восторгов, поскольку все они похожи друг на друга, отличаясь лишь случайным ассортиментом монстров или магазинов. Задания в игре генерируются случайным образом на основе нескольких сотен шаблонов, и направляют игроков в определённый дом определённого города, чтобы найти кого-то там, или в определённое подземелье, чтобы убить там пятерых чего-то там. В отличие от ограниченного масштаба roguelike-игр, Daggerfall дал игрокам целый мир для реализации свободы, однако не сумел обеспечить их достаточным количеством интересных занятий.

![](https://habrastorage.org/getpro/habr/post_images/a0b/a6a/e17/a0ba6ae1758abb7d03bb9c0188941f5c.png)

_Карта одного из 44 регионов Daggerfall. Каждая точка – это пещера, храм, дом или город._

В последнее время невероятный рост возможностей машинного обучения обеспечил новую надежду для тех, кто мечтает о процедурной генерации ролевых игр. Компьютер, способный выдавать ответы на естественном языке в ответ на запросы на естественном языке, безумная мечта по меркам всего лишь десятилетней давности, теперь кажется новой реальностью. В прошлом году Ник Уолтон, студент университета Бригама Янга и фанат D&D, понял, что эти новые инструменты можно использовать для симуляции DM. В итоге появилась [AI Dungeon](https://aidungeon.io/), созданная на основе модели машинного обучения GPT-2 от Open AI.

GPT-2, обученная на гигабайтах текста, удивительно хорошо умеет выдавать осмысленный текст, занимаясь предсказанием следующего слова, которое должно идти за заданным списком входящих слов. Уолтон подстроил модель, скормив ей сценарии огромного количества приключенческих игр. Таким способом он создал мега-Adventure, способную разветвляться в бесконечном количестве направлений. Этот парсер не является просто красивой обёрткой для блок-схемы. Он, как живой DM, генерирует новые реакции на каждое действие игрока.

Однако этой открытости приходится принести неприятную жертву – слабую непротиворечивость AI Dungeon можно сравнить разве что со сном или галлюцинацией. У игры нет модели мира, на основе которой можно было бы строить ответы. Это призма, преломляющая слова игрока в текстовой линзе, и выдающая результат обратно на экран. Игра не моргнув глазом среагирует на абсурдные действия игрока, не имеющие смысла в контексте приключений в фэнтезийном мире, к примеру «полететь на Таити» или «написать эссе по Dungeons and Dragons». Словно река, игра не позволяет вам войти в одно и то же место два раза. Вот моя попытка поиграть в неё в качестве волшебника по имени Йокоуну. Обратите внимание, каким впечатляющим был текст, пока я не попробовал вернуться по следам обратно:

> Вы – Йокоуну, волшебник, живущий в королевстве Larion. При себе у вас есть посох и книга заклинаний. Вы закончили долгое путешествие, прибыв к руинам, которые вы разыскивали. Вы осматриваетесь и действительно видите разрушенный город. Стен уже нет, но здания всё ещё стоят, будто они были возведены, чтобы существовать вечно.
>
> Сами руины не представляют собой ничего особенного; в них нет ничего, кроме обломков и пыли.
>
> \> войти в ближайшее здание
>
> Вы идёте по направлению к одному из зданий, похожему на что-то вроде главного здания гильдии. Вы открываете двери и оказываетесь в большой комнате, где за несколькими столами сидит куча народу. Большинство из них, судя по всему, это маги, изучающие какую-то книгу.
>
> \> попробовать другое здание
>
> Вы отправляетесь в другое здание, которое не выглядит особенно интересным. Вы проходите через двери и спускаетесь по лестнице.
>
> \> вернуться в здание гильдии
>
> Вы решаете изучить здание гильдии, поскольку уже видели его издалека. Судя по всему, это неплохое место для того, чтобы получить информацию о том, что происходит в остальных частях города.
>
> \> осмотреться
>
> Зайдя внутрь, вы чувствуете себя неуютно. Внутри столько народу, что это больше похоже на вторжение. Они глазеют на вас и корчат рожи. Некоторые даже начинают громко рассуждать о том, как «мы»
>
> \[это не ошибка, текст действительно обрывается именно так из-за какого-то глюка в алгоритме генерации\]

## Слава мастеру подземелий

Из-за ограничений масштабирования такие модели, как GPT-2, способны учитывать не более нескольких сотен предыдущих слов для построения следующего текста. Однако Google недавно [объявила](https://ai.googleblog.com/2020/01/reformer-efficient-transformer.html&) о создании механизма МО нового типа, которое она называет «реформер», способный гораздо дальше заглядывать в прошлое. Сможет ли этот или иной прорыв вдохнуть непротиворечивость в фантасмагорию AI Dungeon? Время покажет.

Пока что попытки завернуть магию D&D в обложку книги или записать её в электронную память компьютера с треском проваливались. Игровые книги и компьютерные игры доступны для игр в любое время дня и ночи. Они всегда дадут вам непротиворечивое ощущение, а лучшие из них – много часов удовольствия. Они никогда не выгорают, не устают и не ленятся. Их память или воображение никогда не отказывают. Но не имея человеческого интеллекта, они не способны предложить истинную свободу, не принося в жертву непротиворечивость. Тут играют свою роль и экономические соображения. На количество вариантов, которые можно предоставить игроку в компьютерной RPG, нет строгих ограничений, если потратить достаточно денег и времени – но на практике ограничения есть, и довольно жёсткие. Либо ваши действия во вторичном мире, создаваемом игрой, жёстко ограничены путём, предусмотренным создателем, либо мир будет чем-то вроде лихорадочного бреда, нескончаемым настоящим без прошлого и будущего.

Так что пока нам приходится работать с мастерами подземелий и их человеческими слабостями, чтоб они были здоровы.

## Что ещё почитать

- Shannon Appelcline, Designers & Dragons: The ’70s (2014)
- Jimmy Maher, [The Digital Antiquarian](http://filfre.net/) (2011-present)
- Jon Peterson, Playing at the World (2012)

---

Оригинал перевода: https://habr.com/ru/post/490856/#comments
