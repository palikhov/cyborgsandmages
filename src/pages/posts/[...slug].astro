---
import { CollectionEntry, getCollection } from 'astro:content';
import ArticleLayout from '~layouts/ArticleLayout.astro';
import Aside from '~components/Aside.astro';
import Verse from '~components/Verse.astro';
import Generator from '~components/Generator.astro';
import Creature from '~components/5e/Creature.astro';
import Item from '~components/5e/Item.astro';

export async function getStaticPaths() {
	const posts = await getCollection('posts');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post
	}));
}

type Props = CollectionEntry<'posts'>;

const post = Astro.props;

const { Content, headings } = await post.render();
---

<ArticleLayout {...post} {headings}>
	<Content components={{ Aside: Aside, Verse: Verse, Creature: Creature, Item: Item, Generator: Generator }} />
</ArticleLayout>
